"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4468],{9154:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>v,frontMatter:()=>s,metadata:()=>d,toc:()=>l});var t=o(5893),i=o(1151);const s={sidebar_position:6},r="CLI",d={id:"cli",title:"CLI",description:"vovk dev",source:"@site/docs/cli.md",sourceDirName:".",slug:"/cli",permalink:"/docs/cli",draft:!1,unlisted:!1,editUrl:"https://github.com/finom/vovk/tree/main/docs/docs/cli.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"API",permalink:"/docs/api"},next:{title:"Customization",permalink:"/docs/customization"}},c={},l=[{value:"<code>vovk dev</code>",id:"vovk-dev",level:2},{value:"<code>vovk generate</code>",id:"vovk-generate",level:2},{value:"Available env variables",id:"available-env-variables",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"cli",children:"CLI"}),"\n",(0,t.jsx)(n.h2,{id:"vovk-dev",children:(0,t.jsx)(n.code,{children:"vovk dev"})}),"\n",(0,t.jsxs)(n.p,{children:["Runs Vovk Metadata Server and ",(0,t.jsx)(n.code,{children:"next dev"})," in parallel. Next.js dev server will send information about controllers and worker services to the Metadata Server to build ",(0,t.jsx)(n.strong,{children:".vovk.json"})," and ",(0,t.jsx)(n.strong,{children:"node_modules/.vovk"})," files. Please check ",(0,t.jsx)(n.a,{href:"./how-it-works",children:"How it Works"})," for more info."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"vovk dev"})," supports ",(0,t.jsx)(n.code,{children:"--no-next-dev"})," flag that indicates that it shouldn't run ",(0,t.jsx)(n.code,{children:"next dev"}),". This is useful in case if you want to take control over ",(0,t.jsx)(n.code,{children:"next dev"})," and run it by yourself with ",(0,t.jsx)(n.a,{href:"https://www.npmjs.com/package/concurrently",children:"concurrently"})," or similar library. At this case it is required to set ",(0,t.jsx)(n.code,{children:"PORT"})," and ",(0,t.jsx)(n.code,{children:"VOVK_PORT"})," env variables explicitly."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"PORT=4000 VOVK_PORT=6969 concurrently 'vovk dev --no-next-dev' 'next dev'\n"})}),"\n",(0,t.jsx)(n.h2,{id:"vovk-generate",children:(0,t.jsx)(n.code,{children:"vovk generate"})}),"\n",(0,t.jsxs)(n.p,{children:["Generates the client based on ",(0,t.jsx)(n.strong,{children:".vovk.json"})," and puts ",(0,t.jsx)(n.strong,{children:".js"})," and ",(0,t.jsx)(n.strong,{children:".d.ts"})," files into ",(0,t.jsx)(n.strong,{children:"node_modules/.vovk"})," that are re-exported by ",(0,t.jsx)(n.strong,{children:"vovk-client"}),". ",(0,t.jsx)(n.strong,{children:".vovk.json"})," is generated via ",(0,t.jsx)(n.code,{children:"vovk dev"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Both commands accept the following flags:"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"--config"})," - path to ",(0,t.jsx)(n.strong,{children:"vovk.config.js"}),"\n",(0,t.jsx)(n.code,{children:"--clientOut"})," - where client needs to be generated"]}),"\n",(0,t.jsxs)(n.p,{children:["For ",(0,t.jsx)(n.code,{children:"vovk dev"})," all flags that come after ",(0,t.jsx)(n.code,{children:"--"})," are passed directly to ",(0,t.jsx)(n.code,{children:"next dev"})," as is."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"npx vovk dev --config=my-vovk-config.js --clientOut=my-custom-folder -- --experimental-https --keepAliveTimeout 70000\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"npx vovk generate --config=my-vovk-config.js --clientOut=my-custom-folder\n"})}),"\n",(0,t.jsxs)(n.p,{children:["All other commands such as ",(0,t.jsx)(n.code,{children:"next build"})," and ",(0,t.jsx)(n.code,{children:"next start"})," remain the same since the project is a normal Next.js application."]}),"\n",(0,t.jsx)(n.h2,{id:"available-env-variables",children:"Available env variables"}),"\n",(0,t.jsxs)(n.p,{children:["Environment variables allow to customize Vovk.ts behaviour by overriding configuration optionally defined at ",(0,t.jsx)(n.strong,{children:"vovk.config.js"}),". You can find more detailed information about customization at ",(0,t.jsx)(n.a,{href:"./customization",children:"Customization"})," article of this documentation. Here is a quick ref:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"PORT=3000"})," - defines port for Next.js server that is also used by the Metadata Server to ping Next.js server (relevant only with ",(0,t.jsx)(n.code,{children:"vovk dev"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"VOVK_PORT=3690"})," - Vovk Metadata Server port (relevant only with ",(0,t.jsx)(n.code,{children:"vovk dev"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"VOVK_ROUTE=./src/app/api/[[...vovk]]/route.ts"})," - allows to redefine path to the wildcard route (the slug can be any non-empty string, it's name is not utilised by Vovk.ts)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"VOVK_FETCHER=vovk/client/defaultFetcher"})," - allows to customize the fetching function that used internally by the client."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"VOVK_PREFIX=/api"})," - defines the root endpoint used by ",(0,t.jsx)(n.code,{children:"fetch"})," function at the client."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"VOVK_VALIDATE_ON_CLIENT"})," - defines client-side validation library. If ",(0,t.jsx)(n.a,{href:"https://github.com/finom/vovk-zod",children:"vovk-zod"})," is installed but ",(0,t.jsx)(n.code,{children:"VOVK_VALIDATE_ON_CLIENT"})," is not redefined it's value going to get value ",(0,t.jsx)(n.code,{children:"vovk-zod/zodValidateOnClient"}),". See ",(0,t.jsx)(n.a,{href:"./customization",children:"Customization"})," for more info."]}),"\n"]})]})}function v(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},1151:(e,n,o)=>{o.d(n,{Z:()=>d,a:()=>r});var t=o(7294);const i={},s=t.createContext(i);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);